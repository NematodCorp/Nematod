#pragma once

class length_counter {
public:
       void halt(bool yes) {halted = yes;};
       void load(int index) {counter = length_counter_lookup[index & 0x1F ];}
       bool operator() {return counter == 0;}
       void tick() {if(counter > 0) {--counter;}}

protected:
       constexpr static std::array<data, 32> length_counter_lookup =
       {0x0A, 0xFE, 0x14, 0x02, 0x28, 0x04, 0x50, 0x06, 0xA0, 0x08, 0x3C, 0x0A, 0x0E, 0x0C, 0x1A, 0x0E,
        0x0C, 0x10, 0x18, 0x12, 0x30, 0x14, 0x60, 0x16, 0xC0, 0x18, 0x48, 0x1A, 0x10, 0x1C, 0x20, 0x1E};

       bool halted = true;
       int counter = 0;
};
